"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var os=_interopDefault(require("os")),fs$5=_interopDefault(require("fs")),path$9=_interopDefault(require("path"));function createAssignment(e,t,n={}){return{id:e,dueDate:t,attributes:n}}var Assignment=Object.freeze({createAssignment:createAssignment});const ASSIGNMENT_KEY="assignment",OUTPUT_LOG="db.assignment.log";function setupDatabase(e){return ASSIGNMENT_KEY in e||(e[ASSIGNMENT_KEY]=new Map),e}function clearDatabase(e){return ASSIGNMENT_KEY in e&&delete e[ASSIGNMENT_KEY],e}function addAssignment(e,t,n,r,s={}){const a=e[ASSIGNMENT_KEY];let o;if(a.has(t)?o=a.get(t):a.set(t,o={}),n in o)return e.throwError(ASSIGNMENT_KEY,"Found duplicate assignment for user",t),null;{const e=createAssignment(n,new Date(r.getTime()),s);return o[n]=e,e}}function getAssignmentByID(e,t,n){return e[ASSIGNMENT_KEY].get(t)[n]}function getAssignmentsByUser(e,t){return Object.keys(e[ASSIGNMENT_KEY].get(t))}function outputLog(e,t="."){const n=e[ASSIGNMENT_KEY],r={};for(const[e,t]of n.entries())r[e]=t;const s=`${`${"# ".repeat(20)}\n# Assignments\n# Size: ${n.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(r,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG),s)}var AssignmentDatabase=Object.freeze({ASSIGNMENT_KEY:ASSIGNMENT_KEY,setupDatabase:setupDatabase,clearDatabase:clearDatabase,addAssignment:addAssignment,getAssignmentByID:getAssignmentByID,getAssignmentsByUser:getAssignmentsByUser,outputLog:outputLog});function createDatabase(){return{_errors:[],_registry:{},throwError(...e){this._errors.push(e.map(e=>{switch(typeof e){case"string":return e;case"object":return JSON.stringify(e,null,4);default:return String(e)}}).join(" "))},clearErrors(){this._errors.length=0},getErrors(){return this._errors}}}var Database=Object.freeze({createDatabase:createDatabase});function createReview(e,t,n,r,s){return{id:e,date:t,comment:n,type:r,params:s}}var Review=Object.freeze({createReview:createReview});const REVIEW_KEY="review",OUTPUT_LOG$1="db.review.log";function setupDatabase$1(e){return REVIEW_KEY in e||(e[REVIEW_KEY]=new Map),e}function clearDatabase$1(e){return REVIEW_KEY in e&&delete e[REVIEW_KEY],e}function addReview(e,t,n,r,s,a){const o=e[REVIEW_KEY];if(o.has(t))return e.throwError(REVIEW_KEY,"Found duplicate ids for reviews",t),null;{const e=createReview(t,n,r,s,a);return o.set(t,e),e}}function getReviews(e){return e[REVIEW_KEY].keys()}function getReviewByID(e,t){return e[REVIEW_KEY].get(t)}function outputLog$1(e,t="."){const n=e[REVIEW_KEY],r={};for(const[e,t]of n.entries())r[e]=t;const s=`${`${"# ".repeat(20)}\n# Reviews\n# Size: ${n.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(r,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG$1),s)}var ReviewDatabase=Object.freeze({REVIEW_KEY:REVIEW_KEY,setupDatabase:setupDatabase$1,clearDatabase:clearDatabase$1,addReview:addReview,getReviews:getReviews,getReviewByID:getReviewByID,outputLog:outputLog$1});const ONE_DAYTIME=864e5;function compareDates(e,t){return e.getTime()-t.getTime()}function isWithinDates(e,t,n){return compareDates(e,t)>=0&&compareDates(e,n)<=0}function getDaysBetween(e,t){return Math.floor(Math.abs(compareDates(t,e))/ONE_DAYTIME)}function getPastSunday(e,t=0){const n=new Date(e.getTime());return n.setUTCDate(n.getUTCDate()-n.getUTCDay()+t),n}function getNextSunday(e,t=0){const n=new Date(e.getTime());return n.setUTCDate(n.getUTCDate()-n.getUTCDay()+7+t),n}function getNextEffectiveSunday(e,t=0){return e.getUTCDay()>t?getNextSunday(new Date(e.getTime()+7*ONE_DAYTIME)):getNextSunday(e)}function offsetDate(e,t=0){const n=new Date(e.getTime());return t&&n.setUTCDate(n.getUTCDate()+t),n}var DateUtil=Object.freeze({ONE_DAYTIME:ONE_DAYTIME,compareDates:compareDates,isWithinDates:isWithinDates,getDaysBetween:getDaysBetween,getPastSunday:getPastSunday,getNextSunday:getNextSunday,getNextEffectiveSunday:getNextEffectiveSunday,offsetDate:offsetDate});const ONE_DAYTIME$1=864e5;function calculateNumberOfSlipDays(e){return 3*e.weeks}function createSchedule(e,t,n={}){const r=n.threshold||0,s=ONE_DAYTIME$1*r,a=getNextEffectiveSunday(e,r),o=t.getTime()-s,i=getPastSunday(e),l=new Date(i.getTime());let u=0;for(;l.getTime()<o;)l.setUTCDate(l.getUTCDate()+7),++u;return{startDate:e,endDate:t,weeks:u,startSunday:i,firstSunday:a,lastSunday:l}}var Schedule=Object.freeze({ONE_DAYTIME:ONE_DAYTIME$1,calculateNumberOfSlipDays:calculateNumberOfSlipDays,createSchedule:createSchedule});const SCHEDULE_KEY="schedule",OUTPUT_LOG$2="db.schedule.log";function setupDatabase$2(e){return SCHEDULE_KEY in e||(e[SCHEDULE_KEY]=new Map),e}function clearDatabase$2(e){return SCHEDULE_KEY in e&&delete e[SCHEDULE_KEY],e}function addSchedule(e,t,n,r,s={}){const a=e[SCHEDULE_KEY];if(a.has(t))return e.throwError(SCHEDULE_KEY,"Found duplicate schedules for user",userId),null;{const e=createSchedule(n,r,s);return a.set(t,e),e}}function getScheduleByUserID(e,t){return e[SCHEDULE_KEY].get(t)}function outputLog$2(e,t="."){const n=e[SCHEDULE_KEY],r={};for(const[e,t]of n.entries())r[e]=t;const s=`${`${"# ".repeat(20)}\n# Schedules\n# Size: ${n.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(r,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG$2),s)}var ScheduleDatabase=Object.freeze({SCHEDULE_KEY:SCHEDULE_KEY,setupDatabase:setupDatabase$2,clearDatabase:clearDatabase$2,addSchedule:addSchedule,getScheduleByUserID:getScheduleByUserID,outputLog:outputLog$2});function createSubmission(e,t,n,r,s={}){return{id:e,owner:t,assignment:n,date:r,attributes:s}}var Submission=Object.freeze({createSubmission:createSubmission});const SUBMISSION_KEY="submission",SUBMISSION_OWNER_KEY="owner",SUBMISSION_LIST_KEY="list",OUTPUT_LOG$3="db.submission.log";function setupDatabase$3(e){SUBMISSION_KEY in e||(e[SUBMISSION_KEY]={});const t=e[SUBMISSION_KEY];return SUBMISSION_OWNER_KEY in t||(t[SUBMISSION_OWNER_KEY]=new Map),SUBMISSION_LIST_KEY in t||(t[SUBMISSION_LIST_KEY]=new Map),e}function clearDatabase$3(e){return SUBMISSION_KEY in e&&delete e[SUBMISSION_KEY],e}function addSubmission(e,t,n,r,s,a={}){const o=e[SUBMISSION_KEY],i=o[SUBMISSION_OWNER_KEY],l=o[SUBMISSION_LIST_KEY];if(l.has(t))return e.throwError(SUBMISSION_KEY,"Found duplicate submission with same id",t),null;{Array.isArray(n)&&(n=n[0]);const e=createSubmission(t,n,r,s,a);let o=i.get(n);return o||i.set(n,o={}),addSubmissionToAssignment(e,r,o),l.set(t,e),e}}function addSubmissionToAssignment(e,t,n){if(e.assignment=t,t in n){const r=n[t];let s=0;for(;s<r.length&&!(compareDates(e.date,r[s].date)<0);++s);r.splice(s,0,e)}else n[t]=[e];return e}function changeSubmissionAssignment(e,t,n){const r=e[SUBMISSION_KEY][SUBMISSION_OWNER_KEY].get(t.owner),s=r[t.assignment],a=s.indexOf(t);if(!(a>=0))throw new Error(`Cannot find submission for assignment ${t.assignment}.`);return s.splice(a,1),s.length<=0&&delete r[t.assignment],void 0!==n&&addSubmissionToAssignment(t,n,r),t}function getAssignedSubmissionsByOwnerKey(e,t){return e[SUBMISSION_KEY][SUBMISSION_OWNER_KEY].get(t)}function getSubmissionByID(e,t){return e[SUBMISSION_KEY][SUBMISSION_LIST_KEY].get(t)}function getOwners(e){return e[SUBMISSION_KEY][SUBMISSION_OWNER_KEY].keys()}function getSubmissions(e){return e[SUBMISSION_KEY][SUBMISSION_LIST_KEY].keys()}function clearSubmissionsByOwner(e,t){const n=e[SUBMISSION_KEY][SUBMISSION_LIST_KEY],r=getAssignedSubmissionsByOwnerKey(e,t);if(r)for(const e of Object.values(r))for(const t of e)n.delete(t.id);e[SUBMISSION_KEY][SUBMISSION_OWNER_KEY].delete(t)}function removeSubmissionByID(e,t){const n=e[SUBMISSION_KEY][SUBMISSION_LIST_KEY],r=n.get(t);if(!r)throw new Error(`Cannot find submission for id ${t}.`);n.delete(t),changeSubmissionAssignment(e,r)}function outputLog$3(e,t="."){const n=e[SUBMISSION_KEY][SUBMISSION_OWNER_KEY],r=e[SUBMISSION_KEY][SUBMISSION_LIST_KEY],s={owner:{},list:{}};for(const[e,t]of n.entries())s.owner[e]=t;for(const[e,t]of r.entries())s.list[e]=t;const a=`${`${"# ".repeat(20)}\n# Submissions\n# Size: ${r.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(s,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG$3),a)}var SubmissionDatabase=Object.freeze({SUBMISSION_KEY:SUBMISSION_KEY,SUBMISSION_OWNER_KEY:SUBMISSION_OWNER_KEY,SUBMISSION_LIST_KEY:SUBMISSION_LIST_KEY,setupDatabase:setupDatabase$3,clearDatabase:clearDatabase$3,addSubmission:addSubmission,addSubmissionToAssignment:addSubmissionToAssignment,changeSubmissionAssignment:changeSubmissionAssignment,getAssignedSubmissionsByOwnerKey:getAssignedSubmissionsByOwnerKey,getSubmissionByID:getSubmissionByID,getOwners:getOwners,getSubmissions:getSubmissions,clearSubmissionsByOwner:clearSubmissionsByOwner,removeSubmissionByID:removeSubmissionByID,outputLog:outputLog$3});function createUser(e,t,n,r){return{id:e,ownerKey:t,name:n,attributes:r}}var User=Object.freeze({createUser:createUser});const USER_KEY="user",OUTPUT_LOG$4="db.user.log";function setupDatabase$4(e){return USER_KEY in e||(e[USER_KEY]=new Map),e}function clearDatabase$4(e){return USER_KEY in e&&delete e[USER_KEY],e}function addUser(e,t,n,r,s={}){const a=e[USER_KEY];if(a.has(t))return e.throwError("Found duplicate user with id '"+t+"'."),null;{const e=createUser(t,n,r,s);return a.set(t,e),e}}function getUsers(e){return e[USER_KEY].keys()}function getUserByID(e,t){return e[USER_KEY].get(t)}function getUserByOwnerKey(e,t){const n=e[USER_KEY];for(const e of n.values())if(Array.isArray(e.ownerKey)){if(e.ownerKey.includes(t))return e.id}else if(e.ownerKey==t)return e.id;return null}function getUsersByAttribute(e,t,n){let r=[];const s=e[USER_KEY];for(const e of s.values())if(t in e.attributes){const s=e.attributes[t];Array.isArray(s)?s.includes(n)&&r.push(e.id):s==n&&r.push(e.id)}else null===n&&r.push(e.id);return r}function outputLog$4(e,t="."){const n=e[USER_KEY],r={};for(const[e,t]of n.entries())r[e]=t;const s=`${`${"# ".repeat(20)}\n# Users\n# Size: ${n.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(r,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG$4),s)}var UserDatabase=Object.freeze({USER_KEY:USER_KEY,setupDatabase:setupDatabase$4,clearDatabase:clearDatabase$4,addUser:addUser,getUsers:getUsers,getUserByID:getUserByID,getUserByOwnerKey:getUserByOwnerKey,getUsersByAttribute:getUsersByAttribute,outputLog:outputLog$4});function computeDatesWithPadding(e,t,n){switch(e){case"week":return[getPastSunday(t),getNextEffectiveSunday(n,3)];default:const r=Number(e);if(Number.isNaN(r))throw new Error(`Unknown padding type '${e}'.`);return[new Date(t.getTime()-ONE_DAYTIME*r),new Date(n.getTime()+ONE_DAYTIME*r)]}}function createVacation(e,t,n,r,s,a){const[o,i]=computeDatesWithPadding(s,n,r);return{id:e,userID:t,userStartDate:n,userEndDate:r,effectiveStartDate:o,effectiveEndDate:i,padding:s,duration:getDaysBetween(n,r),attributes:a}}var Vacation=Object.freeze({createVacation:createVacation});const VACATION_KEY="vacation",OUTPUT_LOG$5="db.vacation.log";function setupDatabase$5(e){return VACATION_KEY in e||(e[VACATION_KEY]=new Map),e}function clearDatabase$5(e){return VACATION_KEY in e&&delete e[VACATION_KEY],e}function addVacation(e,t,n,r,s=r,a=0,o={}){const i=e[VACATION_KEY];if(i.has(t))return e.throwError("Found duplicate vacation with id '"+t+"'."),null;{const e=createVacation(t,n,r,s,a,o);return i.set(t,e),e}}function offsetDateByVacations(e,t,n){const r=e[VACATION_KEY],s=getVacationsByUserID(e,t);s.sort((e,t)=>r.get(e).effectiveStartDate.getTime()-r.get(t).effectiveStartDate.getTime());let a=new Date(n.getTime());for(const e of s){const t=r.get(e);if(isWithinDates(a,t.effectiveStartDate,t.effectiveEndDate)){const e=getDaysBetween(a,t.effectiveStartDate);a.setTime(a.getTime()+e*ONE_DAYTIME)}}return a}function getVacations(e){return e[VACATION_KEY].keys()}function getVacationByID(e,t){return e[VACATION_KEY].get(t)}function getVacationsByUserID(e,t){const n=e[VACATION_KEY],r=[];for(const e of n.values())e.userID==t&&r.push(e.id);return r}function getVacationsByAttribute(e,t,n){let r=[];const s=e[VACATION_KEY];for(const e of s.values())if(t in e.attributes){const s=e.attributes[t];Array.isArray(s)?s.includes(n)&&r.push(e.id):s==n&&r.push(e.id)}else null===n&&r.push(e.id);return r}function outputLog$5(e,t="."){const n=e[VACATION_KEY],r={};for(const[e,t]of n.entries())r[e]=t;const s=`${`${"# ".repeat(20)}\n# Vacations\n# Size: ${n.size}\n${"# ".repeat(20)}`}\n${JSON.stringify(r,null,4)}`;require("fs").writeFileSync(require("path").resolve(t,OUTPUT_LOG$5),s)}var VacationDatabase=Object.freeze({VACATION_KEY:VACATION_KEY,setupDatabase:setupDatabase$5,clearDatabase:clearDatabase$5,addVacation:addVacation,offsetDateByVacations:offsetDateByVacations,getVacations:getVacations,getVacationByID:getVacationByID,getVacationsByUserID:getVacationsByUserID,getVacationsByAttribute:getVacationsByAttribute,outputLog:outputLog$5});const fs=require("fs"),readline=require("readline"),Papa=require("papaparse");function readJSONFile(e){const t=fs.readFileSync(e);return JSON.parse(t)}function readCSVFileByRow(e,t){return new Promise((n,r)=>{const s=fs.createReadStream(e);Papa.parse(s,{step:e=>t(e.data),complete:n,error:r})})}function readFileByLine(e,t){return new Promise((n,r)=>{const s=fs.createReadStream(e),a=readline.createInterface({input:s});s.on("error",e=>{console.error(e),r(e)}),a.on("line",t),a.on("close",()=>{n()})})}function writeToFile(e,t){fs.writeFile(e,t,function(t){if(t)return console.log(t);console.log("File saved:",e)})}function writeTableToCSV(e,t){writeToFile(e,t.map(e=>e.join(",")).join("\n"))}var FileUtil=Object.freeze({readJSONFile:readJSONFile,readCSVFileByRow:readCSVFileByRow,readFileByLine:readFileByLine,writeToFile:writeToFile,writeTableToCSV:writeTableToCSV});const path=require("path"),fs$1=require("fs"),DEFAULT_CONFIG_FILE_NAME="config.json";async function loadConfig(e){if(!fs$1.existsSync(e))return Promise.reject(`Cannot find non-existant path '${e}'.`);let t,n;if(fs$1.lstatSync(e).isDirectory()){if(n=e,e=path.resolve(n,DEFAULT_CONFIG_FILE_NAME),!fs$1.existsSync(e))return Promise.reject(`Cannot find config file in directory '${n}'.`)}else n=path.dirname(e);try{t=readJSONFile(e)}catch(e){return Promise.reject(["Failed to parse config file:","=>",e,"<="])}if("include"in(t=resolveConfigPaths(n,t))){const e=[],n=[];for(const r of t.include)try{const t=await loadConfig(r);n.push(t)}catch(t){e.push(t)}if(e.length>0)return Promise.reject(["Failed to resolve config includes:","=>",e,"<="]);const r=n.reduce((e,t)=>mergeConfigs(t,e),{});t=mergeConfigs(t,r)}return t}function resolveConfigEntry(e,t,n){if(t.toLowerCase().endsWith("path"))return resolveConfigPathEntry(e,n);if(Array.isArray(n)){let t=[];for(const r in n)t.push(resolveConfigEntry(e,r,n[r]));return t}if("object"==typeof n){let t={};for(const[r,s]of Object.entries(n))t[r]=resolveConfigEntry(e,r,s);return t}return n}function resolveConfigPathEntry(e,t){if(Array.isArray(t)){let n=[];for(const r of t)n.push(resolveConfigPathEntry(e,r));return n}return"object"==typeof t?resolveConfigPaths(e,t):"string"==typeof t?path.resolve(e,t):t}function resolveConfigPaths(e,t){const n=resolveConfigEntry(e,"",t);return"include"in t&&Array.isArray(t.include)&&(n.include=t.include.map(t=>resolveConfigPathEntry(e,t))),n}function mergeConfigs(e,t){for(const[n,r]of Object.entries(e))n in t?Array.isArray(t[n])&&(Array.isArray(r)?t[n]=t[n].concat(r):t[n].push(r)):t[n]=e[n];return t}var ConfigLoader=Object.freeze({loadConfig:loadConfig});function parseDate(e){const t=new Date(1e3),n=Number(e.substring(0,4)),r=Number(e.substring(5,7)),s=Number(e.substring(8,10)),a=Number(e.substring(11,13)),o=Number(e.substring(14,16)),i=Number(e.substring(17,19));if(NaN===n||NaN===r||NaN===s||NaN===a||NaN===o||NaN===i)throw new Error("Invalid date format - should be YYYY-MM-DD HH:MM:SS.");return t.setUTCFullYear(n),t.setUTCMonth(r-1),t.setUTCDate(s),t.setUTCHours(a),t.setUTCMinutes(o),t.setUTCSeconds(i),t}function parseAmericanDate(e){const t=new Date(1e3),n=e.split("/"),r=Number(n[2]),s=Number(n[0]),a=Number(n[1]);if(NaN===r||NaN===s||NaN===a)throw new Error("Invalid date format - should be MM/DD/YYYY.");return t.setUTCFullYear(r),t.setUTCMonth(s-1),t.setUTCDate(a),t}var ParseUtil=Object.freeze({parseDate:parseDate,parseAmericanDate:parseAmericanDate});async function setupDatabase$6(e){const t=createDatabase();let n;return n="currentDate"in e?parseAmericanDate(e.currentDate):new Date(Date.now()),t.currentDate=n,setupDatabase$4(t),setupDatabase$2(t),setupDatabase$3(t),setupDatabase(t),setupDatabase$1(t),setupDatabase$5(t),t}async function clearDatabase$6(e,t){return delete e.currentDate,clearDatabase$4(e),clearDatabase$2(e),clearDatabase$3(e),clearDatabase(e),clearDatabase$1(e),clearDatabase$5(e),e}var DatabaseSetup=Object.freeze({setupDatabase:setupDatabase$6,clearDatabase:clearDatabase$6});const path$1=require("path"),fs$2=require("fs");async function loadParsers(e,t){const n=e._registry;let r;if(r="parsers"in n&&Array.isArray(n.parsers)?n.parsers:n.parsers=[],!("parsers"in t))return Promise.resolve(r);const s=[],a=t.inputPath||".";for(const e of t.parsers){const t=e.filePath,n=e.inputFile;if(!t){s.push("Invalid parser config:","=>","Missing 'filePath' for parser.","<=");continue}if(!fs$2.existsSync(t)){s.push(`Cannot find parser script file '${path$1.basename(t)}':`,"=>",`File does not exist: '${t}'.`,"<=");continue}if(!n){s.push("Invalid parser config:","=>",`Missing 'inputFile' for parser '${t}'.`,"<=");continue}const o=path$1.resolve(a,e.inputFile);if(!fs$2.existsSync(o)){s.push(`Cannot find parser input file '${path$1.basename(o)}':`,"=>",`File does not exist: '${o}'.`,"<=");continue}let i;try{i=require(t)}catch(e){s.push("Unable to import parser file:","=>",`File: '${t}'`,e,"<=");continue}r.push([i,t,o,e.opts])}return s.length>0?Promise.reject(["Failed to resolve parsers from config:","=>",s,"<="]):Promise.resolve(r)}var ParserLoader=Object.freeze({loadParsers:loadParsers});const path$2=require("path"),fs$3=require("fs");async function loadAssigners(e,t){const n=e._registry;let r;if(r="assigners"in n&&Array.isArray(n.assigners)?n.assigners:n.assigners=[],!("assignments"in t))return Promise.resolve(r);const s=[];for(const e of t.assignments){const t=e.name,n=e.filePath;if(!t){s.push("Invalid assignment config:","=>","Missing 'name' for assignment config.","<=");continue}if(!n){s.push("Invalid assignment config:","=>","Missing 'filePath' for assignment config.","<=");continue}if(!fs$3.existsSync(n)){s.push(`Cannot find assigner script file '${path$2.basename(n)}':`,"=>",`File does not exist: '${n}'.`,"<=");continue}let a;try{a=require(n)}catch(e){s.push("Unable to import assigner file:","=>",`File: '${n}'`,e,"<=");continue}r.push([a,n,t,e.opts])}return s.length>0?Promise.reject(["Failed to resolve assignments from config:","=>",s,"<="]):Promise.resolve(r)}var AssignerLoader=Object.freeze({loadAssigners:loadAssigners});async function review(e,t,n,r){e.throwError(`[UNKNOWN_REVIEW] Unknown review type '${n}'.`)}const path$3=require("path"),fs$4=require("fs");async function loadReviewers(e,t){const n=e._registry;let r;if((r="reviewers"in n&&n.reviewers instanceof Map?n.reviewers:n.reviewers=new Map).has("unknown")||r.set("unknown",review),!("reviewers"in t))return Promise.resolve(r);const s=[];for(const e of t.reviewers){const t=e.filePath,n=e.name;if(!n){s.push("Invalid reviewer config:","=>","Missing 'name' for reviewer config.","<=");continue}if(!t){s.push("Invalid reviewer config:","=>","Missing 'filePath' for reviewer config.","<=");continue}if(!fs$4.existsSync(t)){s.push(`Cannot find reviewer script file '${path$3.basename(t)}':`,"=>",`File does not exist: '${t}'.`,"<=");continue}let a;try{a=require(t)}catch(e){s.push("Unable to import reviewer file:","=>",`File: '${t}'`,e,"<=");continue}r.set(n,a)}return s.length>0?Promise.reject(["Failed to resolve reviewers from config:","=>",s,"<="]):Promise.resolve(r)}var ReviewerLoader=Object.freeze({loadReviewers:loadReviewers});const path$4=require("path");async function processInputs(e,t){const n=e._registry;if(!("parsers"in n&&Array.isArray(n.parsers)))return Promise.resolve([]);const r=[];for(const t of n.parsers){const[n,s,a,o]=t;console.log(`......Parsing '${path$4.basename(a)}' with '${path$4.basename(s)}'...`),r.push(n.parse(e,a,o))}return Promise.all(r)}var InputProcessor=Object.freeze({processInputs:processInputs});const path$5=require("path");async function processAssignments(e,t){const n=e._registry;if(!("assigners"in n&&Array.isArray(n.assigners)))return Promise.resolve([]);const r=[];for(const t of n.assigners){const[n,s,a,o]=t;console.log(`......Assigning '${path$5.basename(a)}' with '${path$5.basename(s)}'...`);for(const t of getUsers(e)){const s=getScheduleByUserID(e,t);r.push(n.assign(e,a,t,s,o))}}return Promise.all(r)}var AssignmentProcessor=Object.freeze({processAssignments:processAssignments});async function processReviews(e,t){console.log("......Looking over our work...");const n=e._registry;if(!("reviewers"in n&&n.reviewers instanceof Map))return Promise.resolve([]);const r=n.reviewers,s=[];for(const t of getReviews(e)){const n=getReviewByID(e,t),a=n.type,o=n.params;let i;i=r.has(a)?r.get(a):r.get("unknown"),s.push(i.review(e,t,a,o))}return Promise.all(s)}var ReviewProcessor=Object.freeze({processReviews:processReviews});const path$6=require("path");async function processDatabase(e,t){console.log("......Helping you fix a few things...");const n=[];for(const r of t.resolvers){const t=r.filePath,s=require(t);console.log(`.........Resolving with '${path$6.basename(r.filePath)}'...`),n.push(s.resolve(e,r.opts))}return Promise.all(n)}var ResolveProcessor=Object.freeze({processDatabase:processDatabase});const path$7=require("path");async function processOutput(e,t){console.log("......Generating reports for you...");const n=[];for(const r of t.outputs){const s=r.filePath,a=require(s);console.log(`.........Outputting with '${path$7.basename(r.filePath)}'...`),n.push(a.output(e,t.outputPath,r.opts))}return Promise.all(n)}var OutputProcessor=Object.freeze({processOutput:processOutput});const readline$1=require("readline"),readlineInterface=readline$1.createInterface({input:process.stdin,output:process.stdout});async function question(e){return new Promise((t,n)=>{readlineInterface.on("close",n),readlineInterface.question(e,t)})}async function quit(){readlineInterface.close()}var ConsoleHelper=Object.freeze({question:question,quit:quit});function parseName(e){return e}function parseEmail(e,...t){const n=e.split(",").map(e=>{if(e)return e.trim().toLowerCase()});if(t.length>0)for(const e of t){const t=parseEmail(e);if(Array.isArray(t))for(const e of t)n.push(e);else n.push(t)}return 1===n.length?n[0]:n}var FieldParser=Object.freeze({parseName:parseName,parseEmail:parseEmail});function stringHash(e=""){let t=0;for(let n=0,r=e.length;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function uuid(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}var MathHelper=Object.freeze({stringHash:stringHash,uuid:uuid});const IDENTITY=function(e){return e};class TableBuilder{constructor(){this.entries=[],this.columns=[]}addEntry(...e){this.entries.push(e)}addColumn(e,t=IDENTITY){this.columns.push({header:e,data:t})}build(){const e=[];for(const t of this.columns)e.push(t.header);const t=[];t.push(e);for(const e of this.entries){const n=[];for(const t of this.columns){const r=t.data.apply(null,e);n.push(r)}t.push(n)}return t}}const path$8=require("path");async function output(e,t,n){let r;outputLog$4(e,t),outputLog$2(e,t),outputLog$3(e,t),outputLog(e,t),outputLog$1(e,t),outputLog$5(e,t),writeToFile(path$8.resolve(t,"config.log"),JSON.stringify(n,null,4)),r=e.getErrors().length<=0?"HOORAY! No errors!":"It's okay. We'll get through this.\n\n"+e.getErrors().join("\n"),writeToFile(path$8.resolve(t,"errors.txt"),r)}var DebugInfoOutput=Object.freeze({output:output});const DAYS_PER_WEEK=7,MAX_GENERATED_ASSIGNMENTS=100;function assign(e,t,n,r,s={}){return addAssignment(e,t,n,offsetDateByVacations(e,t,r),s)}function assignWeekly(e,t,n,r,s,a=0,o={}){const i=[];let l;(l=r.getUTCDay()<a?getNextSunday(r):getPastSunday(r)).setUTCDate(l.getUTCDate()+a),l=offsetDateByVacations(e,t,l);let u=1;for(;compareDates(l,s)<=0;){const r=addAssignment(e,t,`${n}[${u}]`,l,Object.assign({},o));if(i.push(r),l.setUTCDate(l.getUTCDate()+DAYS_PER_WEEK),l=offsetDateByVacations(e,t,l),++u>=MAX_GENERATED_ASSIGNMENTS)break}return i}var AssignmentGenerator=Object.freeze({assign:assign,assignWeekly:assignWeekly});function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g,escapeStringRegexp=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(matchOperatorsRe,"\\$&")},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},conversions=createCommonjsModule(function(e){var t={};for(var n in colorName)colorName.hasOwnProperty(n)&&(t[colorName[n]]=n);var r=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in r)if(r.hasOwnProperty(s)){if(!("channels"in r[s]))throw new Error("missing channels property: "+s);if(!("labels"in r[s]))throw new Error("missing channel labels property: "+s);if(r[s].labels.length!==r[s].channels)throw new Error("channel and label counts mismatch: "+s);var a=r[s].channels,o=r[s].labels;delete r[s].channels,delete r[s].labels,Object.defineProperty(r[s],"channels",{value:a}),Object.defineProperty(r[s],"labels",{value:o})}r.rgb.hsl=function(e){var t,n,r=e[0]/255,s=e[1]/255,a=e[2]/255,o=Math.min(r,s,a),i=Math.max(r,s,a),l=i-o;return i===o?t=0:r===i?t=(s-a)/l:s===i?t=2+(a-r)/l:a===i&&(t=4+(r-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+i)/2,[t,100*(i===o?0:n<=.5?l/(i+o):l/(2-i-o)),100*n]},r.rgb.hsv=function(e){var t,n,r,s,a,o=e[0]/255,i=e[1]/255,l=e[2]/255,u=Math.max(o,i,l),c=u-Math.min(o,i,l),f=function(e){return(u-e)/6/c+.5};return 0===c?s=a=0:(a=c/u,t=f(o),n=f(i),r=f(l),o===u?s=r-n:i===u?s=1/3+t-r:l===u&&(s=2/3+n-t),s<0?s+=1:s>1&&(s-=1)),[360*s,100*a,100*u]},r.rgb.hwb=function(e){var t=e[0],n=e[1],s=e[2];return[r.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,s))),100*(s=1-1/255*Math.max(t,Math.max(n,s)))]},r.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,s=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-s)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]},r.rgb.keyword=function(e){var n=t[e];if(n)return n;var r,s,a,o=1/0;for(var i in colorName)if(colorName.hasOwnProperty(i)){var l=colorName[i],u=(s=e,a=l,Math.pow(s[0]-a[0],2)+Math.pow(s[1]-a[1],2)+Math.pow(s[2]-a[2],2));u<o&&(o=u,r=i)}return r},r.keyword.rgb=function(e){return colorName[e]},r.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},r.rgb.lab=function(e){var t=r.rgb.xyz(e),n=t[0],s=t[1],a=t[2];return s/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(n-s),200*(s-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},r.hsl.rgb=function(e){var t,n,r,s,a,o=e[0]/360,i=e[1]/100,l=e[2]/100;if(0===i)return[a=255*l,a,a];t=2*l-(n=l<.5?l*(1+i):l+i-l*i),s=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0&&r++,r>1&&r--,a=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,s[u]=255*a;return s},r.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,s=n,a=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,s*=a<=1?a:2-a,[t,100*(0===r?2*s/(a+s):2*n/(r+n)),100*((r+n)/2)]},r.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,s=Math.floor(t)%6,a=t-Math.floor(t),o=255*r*(1-n),i=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,l,o];case 1:return[i,r,o];case 2:return[o,r,l];case 3:return[o,i,r];case 4:return[l,o,r];case 5:return[r,o,i]}},r.hsv.hsl=function(e){var t,n,r,s=e[0],a=e[1]/100,o=e[2]/100,i=Math.max(o,.01);return r=(2-a)*o,n=a*i,[s,100*(n=(n/=(t=(2-a)*i)<=1?t:2-t)||0),100*(r/=2)]},r.hwb.rgb=function(e){var t,n,r,s,a,o,i,l=e[0]/360,u=e[1]/100,c=e[2]/100,f=u+c;switch(f>1&&(u/=f,c/=f),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),s=u+r*((n=1-c)-u),t){default:case 6:case 0:a=n,o=s,i=u;break;case 1:a=s,o=n,i=u;break;case 2:a=u,o=n,i=s;break;case 3:a=u,o=s,i=n;break;case 4:a=s,o=u,i=n;break;case 5:a=n,o=u,i=s}return[255*a,255*o,255*i]},r.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100;return[255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,n*(1-s)+s)),255*(1-Math.min(1,r*(1-s)+s))]},r.xyz.rgb=function(e){var t,n,r,s=e[0]/100,a=e[1]/100,o=e[2]/100;return n=-.9689*s+1.8758*a+.0415*o,r=.0557*s+-.204*a+1.057*o,t=(t=3.2406*s+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},r.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},r.lab.xyz=function(e){var t,n,r,s=e[0];t=e[1]/500+(n=(s+16)/116),r=n-e[2]/200;var a=Math.pow(n,3),o=Math.pow(t,3),i=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=i>.008856?i:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},r.lab.lch=function(e){var t,n=e[0],r=e[1],s=e[2];return(t=360*Math.atan2(s,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+s*s),t]},r.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},r.rgb.ansi16=function(e){var t=e[0],n=e[1],s=e[2],a=1 in arguments?arguments[1]:r.rgb.hsv(e)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===a&&(o+=60),o},r.hsv.ansi16=function(e){return r.rgb.ansi16(r.hsv.rgb(e),e[2])},r.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},r.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},r.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},r.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},r.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},r.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,s=e[2]/255,a=Math.max(Math.max(n,r),s),o=Math.min(Math.min(n,r),s),i=a-o;return t=i<=0?0:a===n?(r-s)/i%6:a===r?2+(s-n)/i:4+(n-r)/i+4,t/=6,[360*(t%=1),100*i,100*(i<1?o/(1-i):0)]},r.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,s=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(s=(n-.5*r)/(1-r)),[e[0],100*r,100*s]},r.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],100*r,100*s]},r.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var s,a=[0,0,0],o=t%1*6,i=o%1,l=1-i;switch(Math.floor(o)){case 0:a[0]=1,a[1]=i,a[2]=0;break;case 1:a[0]=l,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=i;break;case 3:a[0]=0,a[1]=l,a[2]=1;break;case 4:a[0]=i,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=l}return s=(1-n)*r,[255*(n*a[0]+s),255*(n*a[1]+s),255*(n*a[2]+s)]},r.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},r.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},r.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},r.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],100*r,100*s]},r.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},r.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},r.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},r.gray.hsl=r.gray.hsv=function(e){return[0,0,e[0]]},r.gray.hwb=function(e){return[0,100,e[0]]},r.gray.cmyk=function(e){return[0,0,0,e[0]]},r.gray.lab=function(e){return[e[0],0,0]},r.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},r.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}),conversions_1=conversions.rgb,conversions_2=conversions.hsl,conversions_3=conversions.hsv,conversions_4=conversions.hwb,conversions_5=conversions.cmyk,conversions_6=conversions.xyz,conversions_7=conversions.lab,conversions_8=conversions.lch,conversions_9=conversions.hex,conversions_10=conversions.keyword,conversions_11=conversions.ansi16,conversions_12=conversions.ansi256,conversions_13=conversions.hcg,conversions_14=conversions.apple,conversions_15=conversions.gray;function buildGraph(){for(var e={},t=Object.keys(conversions),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function deriveBFS(e){var t=buildGraph(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),s=Object.keys(conversions[r]),a=s.length,o=0;o<a;o++){var i=s[o],l=t[i];-1===l.distance&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(i))}return t}function link(e,t){return function(n){return t(e(n))}}function wrapConversion(e,t){for(var n=[t[e].parent,e],r=conversions[t[e].parent][e],s=t[e].parent;t[s].parent;)n.unshift(t[s].parent),r=link(conversions[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}var route=function(e){for(var t=deriveBFS(e),n={},r=Object.keys(t),s=r.length,a=0;a<s;a++){var o=r[a];null!==t[o].parent&&(n[o]=wrapConversion(o,t))}return n},convert={},models=Object.keys(conversions);function wrapRaw(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function wrapRounded(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,s=0;s<r;s++)n[s]=Math.round(n[s]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}models.forEach(function(e){convert[e]={},Object.defineProperty(convert[e],"channels",{value:conversions[e].channels}),Object.defineProperty(convert[e],"labels",{value:conversions[e].labels});var t=route(e);Object.keys(t).forEach(function(n){var r=t[n];convert[e][n]=wrapRounded(r),convert[e][n].raw=wrapRaw(r)})});var colorConvert=convert,ansiStyles=createCommonjsModule(function(e){const t=(e,t)=>(function(){const n=e.apply(colorConvert,arguments);return`[${n+t}m`}),n=(e,t)=>(function(){const n=e.apply(colorConvert,arguments);return`[${38+t};5;${n}m`}),r=(e,t)=>(function(){const n=e.apply(colorConvert,arguments);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.grey=s.color.gray;for(const t of Object.keys(s)){const n=s[t];for(const t of Object.keys(n)){const r=n[t];s[t]={open:`[${r[0]}m`,close:`[${r[1]}m`},n[t]=s[t],e.set(r[0],r[1])}Object.defineProperty(s,t,{value:n,enumerable:!1}),Object.defineProperty(s,"codes",{value:e,enumerable:!1})}const a=e=>e,o=(e,t,n)=>[e,t,n];s.color.close="[39m",s.bgColor.close="[49m",s.color.ansi={ansi:t(a,0)},s.color.ansi256={ansi256:n(a,0)},s.color.ansi16m={rgb:r(o,0)},s.bgColor.ansi={ansi:t(a,10)},s.bgColor.ansi256={ansi256:n(a,10)},s.bgColor.ansi16m={rgb:r(o,10)};for(let e of Object.keys(colorConvert)){if("object"!=typeof colorConvert[e])continue;const a=colorConvert[e];"ansi16"===e&&(e="ansi"),"ansi16"in a&&(s.color.ansi[e]=t(a.ansi16,0),s.bgColor.ansi[e]=t(a.ansi16,10)),"ansi256"in a&&(s.color.ansi256[e]=n(a.ansi256,0),s.bgColor.ansi256[e]=n(a.ansi256,10)),"rgb"in a&&(s.color.ansi16m[e]=r(a.rgb,0),s.bgColor.ansi16m[e]=r(a.rgb,10))}return s}})}),hasFlag=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),s=t.indexOf("--");return-1!==r&&(-1===s||r<s)};const env=process.env;let forceColor;function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(!1===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(e&&!e.isTTY&&!0!==forceColor)return 0;const t=forceColor?1:0;if("win32"===process.platform){const e=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in env)||"codeship"===env.CI_NAME?1:t;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const e=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)?1:"COLORTERM"in env?1:(env.TERM,t)}function getSupportLevel(e){return translateLevel(supportsColor(e))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")?forceColor=!1:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=!0),"FORCE_COLOR"in env&&(forceColor=0===env.FORCE_COLOR.length||0!==parseInt(env.FORCE_COLOR,10));var supportsColor_1={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)};const TEMPLATE_REGEX=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):ESCAPES.get(e)||e}function parseArguments(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let s;for(const t of r)if(isNaN(t)){if(!(s=t.match(STRING_REGEX)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(s[2].replace(ESCAPE_REGEX,(e,t,n)=>t?unescape(t):n))}else n.push(Number(t));return n}function parseStyle(e){STYLE_REGEX.lastIndex=0;const t=[];let n;for(;null!==(n=STYLE_REGEX.exec(e));){const e=n[1];if(n[2]){const r=parseArguments(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}function buildStyle(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(n))if(Array.isArray(n[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=n[e].length>0?r[e].apply(r,n[e]):r[e]}return r}var templates=(e,t)=>{const n=[],r=[];let s=[];if(t.replace(TEMPLATE_REGEX,(t,a,o,i,l,u)=>{if(a)s.push(unescape(a));else if(i){const t=s.join("");s=[],r.push(0===n.length?t:buildStyle(e,n)(t)),n.push({inverse:o,styles:parseStyle(i)})}else if(l){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");r.push(buildStyle(e,n)(s.join(""))),s=[],n.pop()}else s.push(u)}),r.push(s.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return r.join("")},chalk=createCommonjsModule(function(e){const t=supportsColor_1.stdout,n="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),r=["ansi","ansi","ansi256","ansi16m"],s=new Set(["gray"]),a=Object.create(null);function o(e,n){n=n||{};const r=t?t.level:0;e.level=void 0===n.level?r:n.level,e.enabled="enabled"in n?n.enabled:e.level>0}function i(e){if(!this||!(this instanceof i)||this.template){const t={};return o(t,e),t.template=function(){const e=[].slice.call(arguments);return f.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,i.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=i,t.template}o(this,e)}n&&(ansiStyles.blue.open="[94m");for(const e of Object.keys(ansiStyles))ansiStyles[e].closeRe=new RegExp(escapeStringRegexp(ansiStyles[e].close),"g"),a[e]={get(){const t=ansiStyles[e];return u.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};a.visible={get(){return u.call(this,this._styles||[],!0,"visible")}},ansiStyles.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles.color.close),"g");for(const e of Object.keys(ansiStyles.color.ansi))s.has(e)||(a[e]={get(){const t=this.level;return function(){const n=ansiStyles.color[r[t]][e].apply(null,arguments),s={open:n,close:ansiStyles.color.close,closeRe:ansiStyles.color.closeRe};return u.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}});ansiStyles.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles.bgColor.close),"g");for(const e of Object.keys(ansiStyles.bgColor.ansi)){if(s.has(e))continue;a["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const n=ansiStyles.bgColor[r[t]][e].apply(null,arguments),s={open:n,close:ansiStyles.bgColor.close,closeRe:ansiStyles.bgColor.closeRe};return u.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}const l=Object.defineProperties(()=>{},a);function u(e,t,n){const r=function(){return c.apply(r,arguments)};r._styles=e,r._empty=t;const s=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>s.level,set(e){s.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>s.enabled,set(e){s.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=l,r}function c(){const e=arguments,t=e.length;let r=String(arguments[0]);if(0===t)return"";if(t>1)for(let n=1;n<t;n++)r+=" "+e[n];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;const s=ansiStyles.dim.open;n&&this.hasGrey&&(ansiStyles.dim.open="");for(const e of this._styles.slice().reverse())r=(r=e.open+r.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return ansiStyles.dim.open=s,r}function f(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return templates(e,r.join(""))}Object.defineProperties(i.prototype,a),e.exports=i(),e.exports.supportsColor=t,e.exports.default=e.exports}),chalk_1=chalk.supportsColor,figlet_1=createCommonjsModule(function(e){var t=t||function(){var e=0,t=1,n=2,r=3,s={},a={font:"Standard",fontPath:"./fonts"};function o(e,t,n){return e===t&&e!==n&&e}function i(e,t){if("_"===e){if(-1!=="|/\\[]{}()<>".indexOf(t))return t}else if("_"===t&&-1!=="|/\\[]{}()<>".indexOf(e))return e;return!1}function l(e,t){var n="| /\\ [] {} () <>".indexOf(e),r="| /\\ [] {} () <>".indexOf(t);return-1!==n&&-1!==r&&n!==r&&1!==Math.abs(n-r)&&"| /\\ [] {} () <>".substr(Math.max(n,r),1)}function u(e,t){var n="[] {} ()".indexOf(e),r="[] {} ()".indexOf(t);return-1!==n&&-1!==r&&Math.abs(n-r)<=1&&"|"}function c(e,t){var n="/\\ \\/ ><".indexOf(e),r="/\\ \\/ ><".indexOf(t);return-1!==n&&-1!==r&&r-n==1&&{0:"|",3:"Y",6:"X"}[n]}function f(e,t,n){return e===n&&t===n&&n}function g(e,t){return e===t&&e}function h(e,t){if("_"===e){if(-1!=="|/\\[]{}()<>".indexOf(t))return t}else if("_"===t&&-1!=="|/\\[]{}()<>".indexOf(e))return e;return!1}function p(e,t){var n="| /\\ [] {} () <>".indexOf(e),r="| /\\ [] {} () <>".indexOf(t);return-1!==n&&-1!==r&&n!==r&&1!==Math.abs(n-r)&&"| /\\ [] {} () <>".substr(Math.max(n,r),1)}function d(e,t){return("-"===e&&"_"===t||"_"===e&&"-"===t)&&"="}function v(e,t){return"|"===e&&"|"===t&&"|"}function b(e,t,n){return" "===t||""===t?e:t===n&&" "!==e?e:t}function y(r,s,a){if(a.fittingRules.vLayout===e)return"invalid";var o,i,l,u,c=Math.min(r.length,s.length),f=!1;if(0===c)return"invalid";for(o=0;o<c;o++)if(i=r.substr(o,1),l=s.substr(o,1)," "!==i&&" "!==l){if(a.fittingRules.vLayout===t)return"invalid";if(a.fittingRules.vLayout===n)return"end";if(v(i,l)){f=f||!1;continue}if(u=!1,f=!0,!(u=!(u=!(u=!(u=a.fittingRules.vRule1?g(i,l):u)&&a.fittingRules.vRule2?h(i,l):u)&&a.fittingRules.vRule3?p(i,l):u)&&a.fittingRules.vRule4?d(i,l):u))return"invalid"}return f?"end":"valid"}function m(e,r,s){var a,o,i,l,u=Math.min(e.length,r.length),c="";for(a=0;a<u;a++)o=e.substr(a,1),i=r.substr(a,1)," "!==o&&" "!==i?s.fittingRules.vLayout===t?c+=b(o,i):s.fittingRules.vLayout===n?c+=b(o,i):c+=l=!(l=!(l=!(l=!(l=s.fittingRules.vRule5?v(o,i):l)&&s.fittingRules.vRule1?g(o,i):l)&&s.fittingRules.vRule2?h(o,i):l)&&s.fittingRules.vRule3?p(o,i):l)&&s.fittingRules.vRule4?d(o,i):l:c+=b(o,i);return c}function S(e,t){var n,r=e.length,s="";for(n=0;n<t;n++)s+=" ";for(n=0;n<r;n++)e[n]+=s}function E(e,t,n){var r=e[0].length,s=t[0].length;return r>s?S(t,r-s):s>r&&S(e,s-r),function(e,t,n,r){var s,a,o,i,l=e.length,u=t.length,c=e.slice(0,Math.max(0,l-n)),f=e.slice(Math.max(0,l-n),l),g=t.slice(0,Math.min(n,u)),h=[];for(a=f.length,s=0;s<a;s++)o=s>=u?f[s]:m(f[s],g[s],r),h.push(o);return i=t.slice(Math.min(n,u),u),[].concat(c,h,i)}(e,t,function(e,t,n){for(var r,s,a,o,i,l,u=e.length,c=e.length,f=(t.length,1);f<=u;){for(r=e.slice(Math.max(0,c-f),c),a=(s=t.slice(0,Math.min(u,f))).length,l="",o=0;o<a;o++)if("end"===(i=y(r[o],s[o],n)))l=i;else{if("invalid"===i){l=i;break}""===l&&(l="valid")}if("invalid"===l){f--;break}if("end"===l)break;"valid"===l&&f++}return Math.min(u,f)}(e,t,n),n)}function w(r,s,a){if(a.fittingRules.hLayout===e)return 0;var g,h,p,d,v,b=r.length,y=s.length,m=b,S=1,E=!1,w=!1;if(0===b)return 0;e:for(;S<=m;){for(h=r.substr(b-S,S),p=s.substr(0,Math.min(S,y)),g=0;g<Math.min(S,y);g++)if(d=h.substr(g,1),v=p.substr(g,1)," "!==d&&" "!==v){if(a.fittingRules.hLayout===t){S-=1;break e}if(a.fittingRules.hLayout===n){d!==a.hardBlank&&v!==a.hardBlank||(S-=1);break e}if(E=!0,w=!1,!(w=!(w=!(w=!(w=!(w=!(w=a.fittingRules.hRule1?o(d,v,a.hardBlank):w)&&a.fittingRules.hRule2?i(d,v,a.hardBlank):w)&&a.fittingRules.hRule3?l(d,v,a.hardBlank):w)&&a.fittingRules.hRule4?u(d,v,a.hardBlank):w)&&a.fittingRules.hRule5?c(d,v,a.hardBlank):w)&&a.fittingRules.hRule6?f(d,v,a.hardBlank):w)){S-=1;break e}}if(E)break;S++}return Math.min(m,S)}function R(e,r,s,a){var g,h,p,d,v,y,m,S,E,w,R=[];for(g=0;g<a.height;g++){E=e[g],w=r[g],m=E.length,S=w.length,p=m-s,d=E.substr(0,Math.max(0,p)),v="";var D=E.substr(Math.max(0,m-s),s),I=w.substr(0,Math.min(s,S));for(h=0;h<s;h++){var _=h<m?D.substr(h,1):" ",O=h<S?I.substr(h,1):" ";if(" "!==_&&" "!==O)if(a.fittingRules.hLayout===t)v+=b(_,O,a.hardBlank);else if(a.fittingRules.hLayout===n)v+=b(_,O,a.hardBlank);else{var N="";v+=N=(N=!(N=!(N=!(N=!(N=!(N=!N&&a.fittingRules.hRule1?o(_,O,a.hardBlank):N)&&a.fittingRules.hRule2?i(_,O,a.hardBlank):N)&&a.fittingRules.hRule3?l(_,O,a.hardBlank):N)&&a.fittingRules.hRule4?u(_,O,a.hardBlank):N)&&a.fittingRules.hRule5?c(_,O,a.hardBlank):N)&&a.fittingRules.hRule6?f(_,O,a.hardBlank):N)||b(_,O,a.hardBlank)}else v+=b(_,O,a.hardBlank)}y=s>=S?"":w.substr(s,Math.max(0,S-s)),R[g]=d+v+y}return R}function D(t,n,r){var s,a,o,i=0,l=[],u=r.height;for(o=0;o<u;o++)l[o]="";for(1===r.printDirection&&(t=t.split("").reverse().join("")),u=t.length,s=0;s<u;s++)if(a=n[t.substr(s,1).charCodeAt(0)]){if(r.fittingRules.hLayout!==e){for(i=1e4,o=0;o<r.height;o++)i=Math.min(i,w(l[o],a[o],r));i=1e4===i?0:i}l=R(l,a,i,r)}if(!0!==r.showHardBlanks)for(u=l.length,o=0;o<u;o++)l[o]=l[o].replace(new RegExp("\\"+r.hardBlank,"g")," ");return l}var I=function(s,a){var o,i=["hLayout","hRule1","hRule2","hRule3","hRule4","hRule5","hRule6"],l={};if("default"===s)for(o=0;o<i.length;o++)l[i[o]]=a.fittingRules[i[o]];else if("full"===s)l={hLayout:e,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if("fitted"===s)l={hLayout:t,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if("controlled smushing"===s)l={hLayout:r,hRule1:!0,hRule2:!0,hRule3:!0,hRule4:!0,hRule5:!0,hRule6:!0};else{if("universal smushing"!==s)return;l={hLayout:n,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1}}return l},_=function(s,a){var o,i=["vLayout","vRule1","vRule2","vRule3","vRule4","vRule5"],l={};if("default"===s)for(o=0;o<i.length;o++)l[i[o]]=a.fittingRules[i[o]];else if("full"===s)l={vLayout:e,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if("fitted"===s)l={vLayout:t,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if("controlled smushing"===s)l={vLayout:r,vRule1:!0,vRule2:!0,vRule3:!0,vRule4:!0,vRule5:!0};else{if("universal smushing"!==s)return;l={vLayout:n,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1}}return l},O=function(e,t,n){var r,a,o,i=(n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).split("\n"),l=[];for(a=i.length,r=0;r<a;r++)l.push(D(i[r],s[e],t));for(a=l.length,o=l[0],r=1;r<a;r++)o=E(o,l[r],t);return o.join("\n")},N=function(e,t,n){N.text(e,t,n)};function M(e,t){var n,r,s=JSON.parse(JSON.stringify(e));if(void 0!==t.horizontalLayout)for(r in n=I(t.horizontalLayout,e))s.fittingRules[r]=n[r];if(void 0!==t.verticalLayout)for(r in n=_(t.verticalLayout,e))s.fittingRules[r]=n[r];return s.printDirection=void 0!==t.printDirection?t.printDirection:e.printDirection,s.showHardBlanks=t.showHardBlanks||!1,s}return N.text=function(e,t,n){var r="";e+="","function"==typeof arguments[1]&&(n=t,(t={}).font=a.font),"string"==typeof t?(r=t,t={}):r=(t=t||{}).font||a.font,N.loadFont(r,function(s,a){if(s)return n(s);n(null,O(r,M(a,t),e))})},N.textSync=function(e,t){var n="";e+="","string"==typeof t?(n=t,t={}):n=(t=t||{}).font||a.font;var r=M(N.loadFontSync(n),t);return O(n,r,e)},N.metadata=function(e,t){e+="",N.loadFont(e,function(n,r){n?t(n):t(null,r,s[e].comment)})},N.defaults=function(e){if("object"==typeof e&&null!==e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return JSON.parse(JSON.stringify(a))},N.parseFont=function(a,o){o=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),s[a]={};var i=o.split("\n"),l=i.splice(0,1)[0].split(" "),u=s[a],c={};if(c.hardBlank=l[0].substr(5,1),c.height=parseInt(l[1],10),c.baseline=parseInt(l[2],10),c.maxLength=parseInt(l[3],10),c.oldLayout=parseInt(l[4],10),c.numCommentLines=parseInt(l[5],10),c.printDirection=l.length>=6?parseInt(l[6],10):0,c.fullLayout=l.length>=7?parseInt(l[7],10):null,c.codeTagCount=l.length>=8?parseInt(l[8],10):null,c.fittingRules=function(s,a){var o,i,l,u,c={},f=[[16384,"vLayout",n],[8192,"vLayout",t],[4096,"vRule5",!0],[2048,"vRule4",!0],[1024,"vRule3",!0],[512,"vRule2",!0],[256,"vRule1",!0],[128,"hLayout",n],[64,"hLayout",t],[32,"hRule6",!0],[16,"hRule5",!0],[8,"hRule4",!0],[4,"hRule3",!0],[2,"hRule2",!0],[1,"hRule1",!0]];for(o=null!==a?a:s,i=0,l=f.length;i<l;)o>=(u=f[i])[0]?(o-=u[0],c[u[1]]=void 0===c[u[1]]?u[2]:c[u[1]]):"vLayout"!==u[1]&&"hLayout"!==u[1]&&(c[u[1]]=!1),i++;return void 0===c.hLayout?0===s?c.hLayout=t:-1===s?c.hLayout=e:c.hRule1||c.hRule2||c.hRule3||c.hRule4||c.hRule5||c.hRule6?c.hLayout=r:c.hLayout=n:c.hLayout===n&&(c.hRule1||c.hRule2||c.hRule3||c.hRule4||c.hRule5||c.hRule6)&&(c.hLayout=r),void 0===c.vLayout?c.vRule1||c.vRule2||c.vRule3||c.vRule4||c.vRule5?c.vLayout=r:c.vLayout=e:c.vLayout===n&&(c.vRule1||c.vRule2||c.vRule3||c.vRule4||c.vRule5)&&(c.vLayout=r),c}(c.oldLayout,c.fullLayout),u.options=c,1!==c.hardBlank.length||isNaN(c.height)||isNaN(c.baseline)||isNaN(c.maxLength)||isNaN(c.oldLayout)||isNaN(c.numCommentLines))throw new Error("FIGlet header contains invalid values.");var f,g=[];for(f=32;f<=126;f++)g.push(f);if(g=g.concat(196,214,220,228,246,252,223),i.length<c.numCommentLines+c.height*g.length)throw new Error("FIGlet file is missing data.");var h,p,d=!1;for(u.comment=i.splice(0,c.numCommentLines).join("\n"),u.numChars=0;i.length>0&&u.numChars<g.length;){for(u[h=g[u.numChars]]=i.splice(0,c.height),f=0;f<c.height;f++)void 0===u[h][f]?u[h][f]="":(p=new RegExp("\\"+u[h][f].substr(u[h][f].length-1,1)+"+$"),u[h][f]=u[h][f].replace(p,""));u.numChars++}for(;i.length>0;){if(h=i.splice(0,1)[0].split(" ")[0],/^0[xX][0-9a-fA-F]+$/.test(h))h=parseInt(h,16);else if(/^0[0-7]+$/.test(h))h=parseInt(h,8);else if(/^[0-9]+$/.test(h))h=parseInt(h,10);else{if(!/^-0[xX][0-9a-fA-F]+$/.test(h)){if(""===h)break;console.log("Invalid data:"+h),d=!0;break}h=parseInt(h,16)}for(u[h]=i.splice(0,c.height),f=0;f<c.height;f++)void 0===u[h][f]?u[h][f]="":(p=new RegExp("\\"+u[h][f].substr(u[h][f].length-1,1)+"+$"),u[h][f]=u[h][f].replace(p,""));u.numChars++}if(!0===d)throw new Error("Error parsing data.");return c},N.loadFont=function(e,t){if(s[e])t(null,s[e].options);else{if("function"!=typeof fetch)throw console.error("figlet.js requires the fetch API or a fetch polyfill such as https://cdnjs.com/libraries/fetch"),new Error("fetch is required for figlet.js to work.");fetch(a.fontPath+"/"+e+".flf").then(function(e){if(e.ok)return e.text();throw console.log("Unexpected response",e),new Error("Network response was not ok.")}).then(function(n){t(null,N.parseFont(e,n))}).catch(t)}},N.loadFontSync=function(e){if(s[e])return s[e].options;throw new Error("synchronous font loading is not implemented for the browser")},N.preloadFonts=function(e,t){if("undefined"==typeof jQuery)throw new Error("jQuery is required for ajax method to work.");jQuery.when.apply(this,e.map(function(e){return jQuery.get(a.fontPath+"/"+e+".flf")})).then(function(){var n=e.length>1?arguments:[arguments];for(var r in e)N.parseFont(e[r],n[r][0]);t&&t()})},N.figFonts=s,N}();e.exports=t}),fontDir=path$9.join(__dirname,"/../fonts/");figlet_1.loadFont=function(e,t){figlet_1.figFonts[e]?t(null,figlet_1.figFonts[e].options):fs$5.readFile(path$9.join(fontDir,e+".flf"),{encoding:"utf-8"},function(n,r){if(n)return t(n);r+="";try{t(null,figlet_1.parseFont(e,r))}catch(e){t(e)}})},figlet_1.loadFontSync=function(e){if(figlet_1.figFonts[e])return figlet_1.figFonts[e].options;var t=fs$5.readFileSync(path$9.join(fontDir,e+".flf"),{encoding:"utf-8"});return t+="",figlet_1.parseFont(e,t)},figlet_1.fonts=function(e){var t=[];fs$5.readdir(fontDir,function(n,r){if(n)return e(n);r.forEach(function(e){/\.flf$/.test(e)&&t.push(e.replace(/\.flf$/,""))}),e(null,t)})},figlet_1.fontsSync=function(){var e=[];return fs$5.readdirSync(fontDir).forEach(function(t){/\.flf$/.test(t)&&e.push(t.replace(/\.flf$/,""))}),e};var nodeFiglet=figlet_1;const version="0.1.0",TITLE="Progress Auditor",DIVIDER_END_PADDING=1,DIVIDER_LENGTH=5*TITLE.length+DIVIDER_END_PADDING;function println(...e){console.log(printToString(...e))}function printToString(...e){return e.join(" ")}function printDivider(e="nu"){println(chalk.gray(e.repeat(Math.floor(DIVIDER_LENGTH/e.length))+e.substring(0,DIVIDER_LENGTH%e.length)))}function rightAlignString(...e){return printToString(...e).padStart(DIVIDER_LENGTH-DIVIDER_END_PADDING," ")}function printTitle(){const e=chalk.green(nodeFiglet.textSync(TITLE,{font:"Big"}));printDivider(),println(e),println(rightAlignString("Version",version)),printDivider()}function printlnError(e){printError(e,0),println()}function printError(e,t=0){if(Array.isArray(e))for(const n of e)"=>"===n?t+=1:"<="===n?t-=1:printError(n,t);else println("  ".repeat(t),chalk.red((t<=0?"+":"-")+" "+e))}const DATABASE_EXPORTS={Assignment:Assignment,AssignmentDatabase:AssignmentDatabase,Database:Database,Review:Review,ReviewDatabase:ReviewDatabase,Schedule:Schedule,ScheduleDatabase:ScheduleDatabase,Submission:Submission,SubmissionDatabase:SubmissionDatabase,User:User,UserDatabase:UserDatabase,Vacation:Vacation,VacationDatabase:VacationDatabase},PIPELINE_EXPORTS={ConfigLoader:ConfigLoader,DatabaseSetup:DatabaseSetup,ParserLoader:ParserLoader,AssignerLoader:AssignerLoader,ReviewerLoader:ReviewerLoader,InputProcessor:InputProcessor,AssignmentProcessor:AssignmentProcessor,ReviewProcessor:ReviewProcessor,ResolveProcessor:ResolveProcessor,OutputProcessor:OutputProcessor},UTIL_EXPORTS={ConsoleHelper:ConsoleHelper,DateUtil:DateUtil,FieldParser:FieldParser,FileUtil:FileUtil,MathHelper:MathHelper,ParseUtil:ParseUtil,TableBuilder:TableBuilder},LIB_EXPORTS={DebugInfoOutput:DebugInfoOutput,AssignmentGenerator:AssignmentGenerator},Library={...DATABASE_EXPORTS,...PIPELINE_EXPORTS,...UTIL_EXPORTS,...LIB_EXPORTS};async function run(){printTitle(),println();const e=await prepareConfig();global.Library=Library;const t=await prepareDatabase(e);await runLoaders(t,e),await runProcessors(t,e),await runOutputs(t,e),quit(),console.log("......Stopped."),console.log(),process.exit(0)}async function prepareConfig(){const e=require("path");println("Running from directory:",e.resolve(".")),println(),println("Getting config file...");let t=null;process.argv.length>2?e.resolve(e.dirname(process.execPath),process.argv[2]):(println("...no config specified..."),println("...getting default config..."),t="./config.json"),println(`Loading config file '${t}'...`);let n=null;try{n=await loadConfig(t)}catch(e){printlnError(e),process.exit(1)}return println("...Success!"),println(),n}async function prepareDatabase(e){println("Setting up the database...");let t=null;try{t=await setupDatabase$6(e)}catch(e){printlnError(e),process.exit(1)}return println("...Success!"),println(),println("Date:",t.currentDate.toDateString()),println(),t}async function runLoaders(e,t){println("Loading parsers...");try{await loadParsers(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println("Loading assigners...");try{await loadAssigners(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println("Loading reviewers...");try{await loadReviewers(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println()}async function runProcessors(e,t){println("...Processing..."),println("Parsing databases...");try{await processInputs(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println("Assigning assignments...");try{await processAssignments(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println("Evaluating reviews...");try{await processReviews(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println("Resolving database...");try{await processDatabase(e,t)}catch(e){printlnError(e),process.exit(1)}println("...Success!"),println()}async function runOutputs(e,t){console.log("...Outputting..."),e.getErrors().length>0?(console.log("......Oh no! We found some errors..."),console.log("......Finding debug info for you..."),await output(e,t.outputPath,t),console.log("...Failed!")):(console.log("......Hooray! Everything is as expected..."),t.debug&&(console.log("......Finding debug info for you..."),await output(e,t.outputPath,t)),await processOutput(e,t),console.log("...Success!"))}run();
